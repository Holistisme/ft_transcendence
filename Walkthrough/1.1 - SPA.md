Parfait ! Tu veux **comprendre en profondeur ce que tu viens d'implÃ©menter**, et tu as raison. Je vais te faire un **descriptif clair, simple et structurÃ©** de tout ce que tu as copiÃ©/collÃ©, Ã©tape par Ã©tape.

---

# ğŸ§  1. Qu'est-ce que le **DOM** ?

**DOM** = *Document Object Model*

ğŸ‘‰ Câ€™est **la reprÃ©sentation de ta page HTML en mÃ©moire**, sous forme dâ€™arbre dâ€™objets manipulables en JavaScript.

Exemple :

```html
<body>
  <div id="app">Hello</div>
</body>
```

Ce HTML devient en JS un truc comme :

```ts
document.body â†’ <body>
document.getElementById("app") â†’ <div id="app">Hello</div>
```

Et tu peux **le modifier en live** avec :

```ts
document.getElementById("app").innerHTML = "Bonjour !";
```

ğŸ“Œ Donc **"manipuler le DOM"**, câ€™est modifier ce que voit lâ€™utilisateur Ã  lâ€™Ã©cran **sans recharger la page**.

---

# ğŸ§± 2. Structure SPA Vanilla TypeScript : Ce que tu as fait

Voici un rÃ©sumÃ© clair de **chaque fichier et son rÃ´le**, avec une explication ligne par ligne ğŸ‘‡

---

## ğŸ§¾ `index.html` â€“ Point dâ€™entrÃ©e de ton app


```html
<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>ft_transcendence</title>
  </head>
  <body>
    <nav>
      <a href="/" data-link>Accueil</a>
      <a href="/game" data-link>Jeu</a>
    </nav>
    <div id="app"></div>
    <script type="module" src="./dist/main.js"></script>
  </body>
</html>
```

---

## ğŸ” Ligne par ligne

### `<!DOCTYPE html>`

* Dit au navigateur : "Ceci est un document HTML5."
* **Obligatoire** en haut de chaque fichier HTML.

---

### `<html lang="fr">`

* Balise *racine* du document HTML.
* `lang="fr"` : prÃ©cise que le contenu est en franÃ§ais (utile pour Google, les lecteurs dâ€™Ã©cran, etc.)

---

### `<head> ... </head>`

* Partie **invisible pour lâ€™utilisateur**, mais indispensable.
* Contient des **mÃ©tadonnÃ©es** (titre, encodage, scripts externes, styles, etc.)

---

### `<meta charset="UTF-8" />`

* PrÃ©cise lâ€™encodage utilisÃ©.
* **UTF-8 =** supporte tous les caractÃ¨res (accents, emojis, symboles, etc.)
* âš ï¸ Oublier Ã§a peut provoquer des caractÃ¨res "bizarres" dans le texte.

---

### `<title>ft_transcendence</title>`

* DÃ©finit le **titre de lâ€™onglet** dans ton navigateur.
* Tu peux mettre ce que tu veux : `ft_transcendence`, `Pong`, `Mon site`, etc.

---

### `<body> ... </body>`

* **Contenu visible Ã  lâ€™Ã©cran.**
* Tout ce que voit le joueur, câ€™est ce quâ€™il y a dans `<body>`.

---

### `<nav> ... </nav>`

* Signifie : "zone de navigation".
* Ici, on met deux **liens de navigation** :

```html
<a href="/" data-link>Accueil</a>
<a href="/game" data-link>Jeu</a>
```

| Ã‰lÃ©ment          | RÃ´le                                                            |
| ---------------- | --------------------------------------------------------------- |
| `<a>`            | CrÃ©e un lien hypertexte                                         |
| `href="/"`       | Cible lâ€™URL `/` ou `/game`                                      |
| `data-link`      | Sert Ã  notre routeur JS pour intercepter le clic (âš ï¸ important) |
| `Accueil`, `Jeu` | Texte cliquable affichÃ© Ã  lâ€™Ã©cran                               |

---

### `<div id="app"></div>`

* Câ€™est la **boÃ®te vide** dans laquelle **ton application JS injecte du contenu**.
* Ton `router.ts` va faire des trucs comme :

```ts
document.getElementById('app').innerHTML = '<h1>Bienvenue</h1>';
```

> ğŸ§  Donc ce `div` = zone de rendu principale, comme une "tÃ©lÃ©" dans laquelle tu changes le programme.

---

### `<script type="module" src="./dist/main.js"></script>`

* Câ€™est le **point dâ€™entrÃ©e JavaScript de lâ€™application**.
* Il dit : "lance ce fichier JS quand la page est chargÃ©e".
* `type="module"` = permet dâ€™utiliser `import`/`export` dans le fichier.
* `dist/main.js` = version **compilÃ©e** de ton fichier `src/main.ts` (grÃ¢ce Ã  `tsc`).

---

## ğŸ§  RÃ©sumÃ© de ce que fait `index.html`

| Ã‰lÃ©ment HTML         | RÃ´le                                                  |
| -------------------- | ----------------------------------------------------- |
| `<!DOCTYPE html>`    | Dit au navigateur "Je suis du HTML5"                  |
| `<head>`             | Configuration (titre, encodage, etc.)                 |
| `<body>`             | Contenu que voit lâ€™utilisateur                        |
| `<nav>`              | Lien vers des pages internes (`/`, `/game`)           |
| `<div id="app">`     | Zone contrÃ´lÃ©e par JavaScript (ton routeur lâ€™utilise) |
| `<script src="...">` | Fichier JS qui initialise ton app                     |

---

## ğŸ“„ `main.ts` â€“ DÃ©marrage de ton app

```ts
import { initRouter } from './router';

document.addEventListener('DOMContentLoaded', () => {
	initRouter();
});
```

1. Tu importes une fonction `initRouter()` depuis `router.ts`.
2. DÃ¨s que le HTML est chargÃ© (`DOMContentLoaded`), tu initialises le **router SPA**.

   > ğŸ“Œ Câ€™est lui qui dÃ©cide quelle "vue" afficher selon lâ€™URL.

---

## ğŸ“„ `router.ts` â€“ Ton premier router maison

```ts
function render(path: string): void {
	const app = document.getElementById('app');
	if (!app)
		return;

	switch (path) {
		case '/':
			app.innerHTML = '<h1>Bienvenue !</h1>';
			break;
		case '/game':
			app.innerHTML = '<h1>Jeu Pong</h1>';
			break;
		default:
			app.innerHTML = '<h1>404 - Page inconnue</h1>';
	}
}
```

### Cette fonction :

* RÃ©cupÃ¨re ton `<div id="app">` dans le DOM.
* Selon `path` (`/`, `/game`, etc.), elle modifie son contenu HTML.
* Si lâ€™URL ne correspond Ã  rien, affiche une page 404.

---

```ts
export function initRouter(): void {
	// Intercepte les clics sur les <a href="..." data-link>
	document.body.addEventListener('click', (e: MouseEvent) => {
		const target = e.target as HTMLElement;
		if (target.matches('[data-link]')) {
			e.preventDefault(); // empÃªche le rechargement
			const href = target.getAttribute('href');
			if (href) {
				history.pushState({}, '', href); // change l'URL sans reload
				render(href); // change le contenu de <div id="app">
			}
		}
	});

	// GÃ¨re les boutons "PrÃ©cÃ©dent" / "Suivant" du navigateur
	window.addEventListener('popstate', () => {
		render(window.location.pathname);
	});

	// Affiche la bonne vue Ã  lâ€™ouverture
	render(window.location.pathname);
}
```

### Ce bloc :

| Partie                      | RÃ´le                                                 |
| --------------------------- | ---------------------------------------------------- |
| `addEventListener('click')` | Intercepte les clics sur les liens SPA (`data-link`) |
| `preventDefault()`          | EmpÃªche le navigateur de recharger la page           |
| `history.pushState()`       | Change lâ€™URL dans la barre dâ€™adresse **sans reload** |
| `render()`                  | Met Ã  jour le HTML de la page en fonction de lâ€™URL   |
| `popstate`                  | GÃ¨re les flÃ¨ches "<-" et "->" du navigateur          |

---

## ğŸ“¦ `tsconfig.json` â€“ ParamÃ¨tres du compilateur TypeScript

Tu dis Ã  `tsc` (TypeScript Compiler) comment convertir ton code `.ts` en `.js`, avec :

```json
"outDir": "./dist",
"rootDir": "./src",
"target": "ES6"
```

> RÃ©sultat : `src/main.ts` devient `dist/main.js`

---

## ğŸ“¦ `package.json` â€“ Scripts utiles

```json
"scripts": {
  "build": "tsc",
  "start": "lite-server",
  "dev": "tsc --watch"
}
```

| Script          | Fait quoi ?                             |
| --------------- | --------------------------------------- |
| `npm run build` | Compile tout ton code TypeScript        |
| `npm start`     | Lance un serveur local avec live reload |
| `npm run dev`   | Recompile automatiquement Ã  chaque save |
